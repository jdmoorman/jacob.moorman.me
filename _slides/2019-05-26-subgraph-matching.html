---
layout: presentation
title: Subgraph Matching (Advancement to Candidacy)
order: 9
---

## Subgraph Matching

**Jacob Moorman**

&nbsp;

In collaboration with

*Thomas Tu, Qinyi Chen, Xie He, and Andrea Bertozzi*

of UCLA Department of Mathematics




-vertical-

Work funded by DARPA

under the Modeling Adversarial Activity (MAA) program




-vertical-

Jacob was funded by NSF grant DGE-1829071




-horizontal-

## Subgraph Matching Problem

Find all copies of a **template** graph in a **world** graph

<img class="plain" src="definitions-example.png" width="50%">

An instance of the *template* in the *world* is called a **signal**





-vertical-

## Main Algorithm: Tree Search

  1. Find all signals where \\(\mathbf{A} = \mathbf{1}\\)
    1. Find all signals where \\(\mathbf{A} = \mathbf{1}\\) and \\(\mathbf{C} = \mathbf{6}\\)
      1. ...
  2. Find all signals where \\(\mathbf{A} = \mathbf{4}\\)
  3. ...

<img class="plain" src="definitions-example.png" width="50%">




-vertical-

## Tree Search Considerations

* **Search Order:** In what order should we match the template nodes?
* **Pruning Rules:** To which world nodes should we try matching them?

<img class="plain" src="definitions-example.png" width="50%">




-horizontal-

## Search Order

> *In what order should we match the template nodes?*

Use a heuristic to precompute a fixed order on the template nodes.




-vertical-

## Search Order Heuristics

* Fewest candidates first
* Highest degree first
* Most neighbors first
* ...

<img class="plain" src="definitions-example.png" width="50%">




-vertical-

## Search Order Objective

The objective in choosing a search order is to minimize the computational cost of traversing the search tree.




-horizontal-

## Pruning Rules

> To which world nodes should we try matching the template nodes?

Try matching each template node to world nodes which satisfy some set of constraints. Refer to these world nodes as **candidates**.




-vertical-

## Pruning Rules: Node Stats

A candidate should have as many incoming/outgoing edges as its corresponding template nodes.

<img class="plain" src="cheap-filters-example.png" width="60%">




-vertical-

<img class="plain" style="margin:0;"  src="cheap-filters-example.png" width="70%">

| Template Node | Candidates After Stats|
|:---:|:---:|
| A | 1, 3, 4 |
| B | 1, 2, 3, 4 |
| C | 4 |




-vertical-

## Pruning Rules: Topology

Candidates for neighboring template nodes should neighbor other candidates for the corresponding template nodes.

<img class="plain" src="cheap-filters-example.png" width="60%">




-vertical-

<img class="plain" style="margin:0;" src="cheap-filters-example.png" width="70%">

| Template Node | Candidates Before Topology | Candidates After Topology |
|:---:|:---:|:---:|
| A | 1, 3, 4 | 1 |
| B | 1, 2, 3, 4 | 1, 2 |
| C | 4 | 4 |




-vertical-

## Pruning Rules: Pigeonhole

If **k** world nodes are candidates for the same **k** template nodes, they cannot be candidates for any others.

<img class="plain" src="cheap-filters-example.png" width="60%">




-vertical-

<img class="plain" style="margin:0;" src="cheap-filters-example.png" width="70%">

| Template Node | Candidates Before Pigeonhole | Candidates After Pigeonhole |
|:---:|:---:|:---:|
| A | 1, 3, 4 | 1 |
| B | 1, 2, 3, 4 | 2 |
| C | 4 | 4 |




-vertical-

## Pruning Rules: Neighborhood

The neighborhood of a candidate should be matchable to the neighborhood of the corresponding template node.

<img class="plain" src="neighborhood-example.png" width="60%">




-horizontal-

## Results

<img src="cand-counts-nxgraph.png" width="70%">




-vertical-

<img style="margin:0;"  src="legend.png" width="25%">

<img style="margin:0;"  src="histogram.png" width="50%">




-horizontal-

## Future Work

* Approximate matching
* Attributes beyond node/edge types (eg. timestamps)
